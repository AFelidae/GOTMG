myLevel = JSON.parse('[[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":15,"wall":0,"roof":0},{"ground":15,"wall":0,"roof":0},{"ground":15,"wall":0,"roof":15},{"ground":15,"wall":0,"roof":15},{"ground":15,"wall":0,"roof":15},{"ground":0,"wall":0,"roof":15},{"ground":0,"wall":0,"roof":15},{"ground":0,"wall":15,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":15,"wall":0,"roof":0},{"ground":15,"wall":0,"roof":0},{"ground":15,"wall":0,"roof":15},{"ground":15,"wall":0,"roof":15},{"ground":15,"wall":0,"roof":15},{"ground":0,"wall":0,"roof":15},{"ground":0,"wall":0,"roof":15},{"ground":0,"wall":15,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":15,"wall":0,"roof":0},{"ground":15,"wall":0,"roof":0},{"ground":15,"wall":0,"roof":15},{"ground":15,"wall":0,"roof":15},{"ground":15,"wall":0,"roof":15},{"ground":0,"wall":0,"roof":15},{"ground":0,"wall":0,"roof":15},{"ground":0,"wall":15,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":15,"wall":0,"roof":0},{"ground":15,"wall":0,"roof":0},{"ground":15,"wall":0,"roof":15},{"ground":15,"wall":0,"roof":15},{"ground":15,"wall":0,"roof":15},{"ground":0,"wall":0,"roof":15},{"ground":0,"wall":0,"roof":15},{"ground":0,"wall":15,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":15,"wall":0,"roof":0},{"ground":15,"wall":0,"roof":0},{"ground":15,"wall":0,"roof":15},{"ground":15,"wall":0,"roof":15},{"ground":15,"wall":0,"roof":15},{"ground":0,"wall":0,"roof":15},{"ground":0,"wall":0,"roof":15},{"ground":0,"wall":15,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0}],[{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":15,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0},{"ground":0,"wall":0,"roof":0}]]')

var TestingRange = new Level()
TestingRange.create(myLevel,0)

camera.position.x = startPos.x
camera.position.z = startPos.z

function animate() {
	requestAnimationFrame(animate);

	let current = {x:camera.position.x, z:camera.position.z}
  //Do Stuff Here
  if(87 in keysDown){//W
    camera.position.z -= Math.cos(camera.rotation.y) * 5
    camera.position.x -= Math.sin(camera.rotation.y) * 5
  }
  if(83 in keysDown){//S
    camera.position.z += Math.cos(camera.rotation.y) * 3
    camera.position.x += Math.sin(camera.rotation.y) * 3
  }

  if(65 in keysDown){//A
    camera.position.z += Math.cos(camera.rotation.y - (Math.PI / 2)) * 3
    camera.position.x += Math.sin(camera.rotation.y - (Math.PI / 2)) * 3
  }
  if(68 in keysDown){//D
    camera.position.z -= Math.cos(camera.rotation.y - (Math.PI / 2)) * 3
    camera.position.x -= Math.sin(camera.rotation.y - (Math.PI / 2)) * 3
  }

  if(74 in keysDown){//J
    camera.rotation.y += 0.025
  }
  if(76 in keysDown){//L
    camera.rotation.y -= 0.025
  }
	let next = {x:camera.position.x, z:camera.position.z}

	let update = TestingRange.collision(current,next)
	camera.position.x = update.x
	camera.position.z = update.z

	renderer.render(scene, camera)
}

animate()
